<html>

<link rel="stylesheet" href="../assets/style/addrecipe.css">

<body>
  <div class="contact-form">
    <span class="heading">Add New Recipe</span>
    <form id="addrecipe">
      <label for="image">Image Url</label>
      <input type="url" required="" id="imgurl">
      <label for="head">recipe Name</label>
      <input type="text" required="" id="recipeName">
      <label for="head">About</label>
      <input type="text" required="" id="About">
      <label for="head">Ingredients</label>
      <input type="text" required="" id="Ingredients">
      <label for="head">Step1</label>
      <input type="text" required="" id="Step1">
      <label for="head">Step2</label>
      <input type="text" required="" id="Step2">
      <label for="head">Step3</label>
      <input type="text" required="" id="Step3">
      <label for="head">Step4</label>
      <input type="text" required="" id="Step4">
      <label for="head">Step5</label>
      <input type="text" required="" id="Step5"> 
      <button type="submit">Submit</button>
    </form>
  </div>
  
  <script>
    const array = JSON.parse(localStorage.getItem("newRecipe"));
    const url= window.location.search
    const Url_params = new URLSearchParams(url)
    const get_id = Url_params.get("id")
    console.log(array);
    let editrecipe = array.find((recipe)=> recipe.recipe_id == get_id)

        let image = document.getElementById("imgurl");
        let recipename = document.getElementById("recipeName");
        let About = document.getElementById("About");
        let Ingredients = document.getElementById("Ingredients");
        let Step1 = document.getElementById("Step1");
        let Step2 = document.getElementById("Step2");
        let Step3 = document.getElementById("Step3");
        let Step4 = document.getElementById("Step4");
        let Step5 = document.getElementById("Step4");


        image.value = editrecipe["image_url"];
        recipename.value = editrecipe["h2_cardtitle"]
        About.value = editrecipe["message"]
        Ingredients.value  = editrecipe["ingredients"]
        Step1.value = editrecipe["Step1"]
        Step2.value = editrecipe["Step2"]
        Step3.value = editrecipe["Step3"]
        Step4.value = editrecipe["Step4"]
        Step5.value = editrecipe["Step5"]


        let pro_info = document.getElementById("addrecipe");
        pro_info.addEventListener("submit", function (event) {
            event.preventDefault();

            let image = document.getElementById("imgurl").value
        let recipename = document.getElementById("recipeName").value
        let About = document.getElementById("About").value
        let Ingredients = document.getElementById("Ingredients").value
        let Step1 = document.getElementById("Step1").value
        let Step2 = document.getElementById("Step2").value
        let Step3 = document.getElementById("Step3").value
        let Step4 = document.getElementById("Step4").value
        let Step5 = document.getElementById("Step4").value

            let  editrecipeObject = {
               imgurl,
               recipename,
               About,
               Ingredients,
               Step1,
               Step2,
               Step3,
               Step4,
               Step5
            };

            let checked_obj = Object.assign(editrecipe, editrecipeObject );
            // console.log(checked_obj);

            let index = user_details.indexOf(editrecipe);
            // console.log(index);

            user_details[index] = checked_obj;

            localStorage.setItem("newRecipe", JSON.stringify(array));

            alert("successfully changed");


            // location.reload()
        }  );

  </script>
</body>


</html>