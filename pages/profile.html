<!DOCTYPE html>
<html lang="en">
<head>
    <a href=""></a>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../assets/style/profile.css" />
  <title>profile</title>
</head>
<body>
    <!-- <img class="logo" src="../assets/images/yellow logo.png" height="50px" width="50px" alt="logo"> -->
  <form class="profile" id="profileform">
    <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control personName" id="name" placeholder="Enter your name" />
    </div>
    <div class="form-group">
        <label for="email">Email:</label>
        <input disabled type="email" class="form-control personEmail" id="email" placeholder="Enter your email" />
    </div>
    <button type="submit" class="btn">Submit</button>
    <button type="submit" class="delete-btn" id ="delete" >Delete</button>
<button type="submit" class="log-btn" id ="logout" >Log Out</button>

    </form>
<script>
let current_email = JSON.parse(localStorage.getItem("data"));
        let user_details = JSON.parse(localStorage.getItem("register"));

        let user_obj = user_details.find(function (user) {
            let check_email = user["getEmail"];
            if (current_email === check_email) {
                return true;
            }
        });
        console.log(user_obj);

        let name = document.getElementById("name");
        let email = document.getElementById("email");

        name.value = user_obj["getname"];
        email.value = current_email;

        let pro_info = document.getElementById("profileform");
        pro_info.addEventListener("submit", function (event) {
            event.preventDefault();

            let getname = document.getElementById("name").value;
            let getEmail = document.getElementById("email").value;

            let user_object = {
                getname,
                getEmail,
            };
            let checked_obj = Object.assign(user_obj, user_object);
            // console.log(checked_obj);
            let index = user_details.indexOf(user_obj);
            // console.log(index);
            user_details[index] = checked_obj;
            localStorage.setItem("register", JSON.stringify(user_details));
            alert("successfully changed");
            // location.reload()
        });
        let user_delete = document.getElementById("delete");
        user_delete.addEventListener("click", function (event) {
            event.preventDefault()
            let Index= user_details.indexOf(user_obj)
            let msg = confirm("Are you sure want to delete your account")
            if (msg !== true) {
                return
            }
            else {
              user_details.splice(Index, 1);
                console.log(user_details);
                localStorage.setItem("register", JSON.stringify(user_details))
                window.location.href = "../index.html";

          }

        });
        

        let logout = document.getElementById("logout");
        logout.addEventListener("click", function (event) {
            event.preventDefault();
            let msg = confirm("Are you sure you want to logout this account ?");
            if (msg !== true) {
                return;
            } else {
                localStorage.setItem("register", JSON.stringify(null));
                window.location.href = "../index.html";
            }
        });

</script>
</body>
</html>



















        